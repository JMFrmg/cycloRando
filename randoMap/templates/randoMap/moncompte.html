{% extends "easyRando/base.html" %}
{% load static %}

{% block specificcs %}
    <link rel="stylesheet" type='text/css' href="{% static 'blog/connexion.css' %}" media="all">
{% endblock %}

{% block content %}
	{% if messages %}
    	<ul class="messages">
    		{% for message in messages %}
    			{% if message.level == 'ERROR' %}
    				<li class="alert alert-danger" role="alert">{{message}}</li>
    			{% else %}
    				<li class="alert alert-seccess" role="alert">{{message}}</li>
    			{% endif %}
    		{% endfor %}
		</ul>
	{% endif %}
	<div class="container">
		<div class="row mt-5">
			<div class="col-sm-10"></div>
			<a class="col-sm-2" href="{% url 'index' %}" style="padding:0; margin:0;"><button type="submit" class="btn btn-success" style="width:100%;">Retour à l'accueil</button></a>
		</div>
		<div class="row">
			<div class="col-sm-2"></div>
			<div class="mt-1 col-sm-8 formulaire-container">
				<form action="{% url 'moncompte' %}" method="post" class="ml-4 needs-validation" novalidate>
					{% csrf_token %}
					<div class="mt-4 row">
						<div class="col-sm-12 mr-sm-2">Mon mail : {{request.user.email}}</div>
					</div>
					<div class="row form-group">
						<div class="col-sm-8">
							<input type="email" class="form-control mb-2 mr-sm-2" id="email" placeholder="Nouvelle adresse mail" name="email">
							<div class="valid-feedback">Valid.</div>
			    			<div class="invalid-feedback">Please fill out this field.</div>
						</div>
						<button type="submit" class="col-sm-2 btn btn-primary mb-2">Modifier</button>
					</div>
				</form>
				<form action="{% url 'moncompte' %}" method="post" class="ml-4 needs-validation" novalidate>
					{% csrf_token %}
					<div class="row">
						<div class="col-sm-12 mr-sm-2">Mon pseudo : {{request.user.username}}</div>
					</div>
					<div class="row form-group">
						<div class="col-sm-8">
							<input type="text" class="form-control mb-2 mr-sm-2" id="username" placeholder="Nouveau nom d'utilisateur" name="username">
							<div class="valid-feedback">Valid.</div>
			    			<div class="invalid-feedback">Please fill out this field.</div>
						</div>
						<button type="submit" class="col-sm-2 btn btn-primary mb-2">Modifier</button>
					</div>
				</form>
				<form action="{% url 'moncompte' %}" method="post" class="ml-4 needs-validation" novalidate>
					{% csrf_token %}
					<div class="row form-group">
						<div class="col-sm-8">
							<input type="password" class="form-control mb-2 mr-sm-2" id="username" placeholder="Nouveau mot de passe" name="password">
							<input type="password" class="form-control mb-2 mr-sm-2" id="password_confirmation" placeholder="Confirmer le mot de passe" name="password_confirmation">
							<div class="valid-feedback">Valid.</div>
			    			<div class="invalid-feedback">Please fill out this field.</div>
						</div>
						<button type="submit" class="col-sm-2 btn btn-primary mb-2">Modifier</button>
					</div>
				</form>
				<form class="ml-4 mb-4" action="{% url 'moncompte' %}" method="post" enctype="multipart/form-data">
					{% csrf_token %}
					<div class="row form-group">
						<div class="col-sm-8">
							<input type="file" class="mb-2 mr-sm-2" name="nvelavatar" />
							<div class="valid-feedback">Valid.</div>
			    			<div class="invalid-feedback">Please fill out this field.</div>
						</div>
						<button type="submit" class="col-sm-2 btn btn-primary mb-2">Modifier</button>
					</div>
				</form>
				<div class="ml-4 mb-2 row">
					<div class="col-sm-8"></div>
					<a class="col-sm-2" href="{% url 'deconnexion' %}" style="padding:0; margin:0;"><button type="submit" class="btn btn-danger" style="width:100%;">Déconnexion</button></a>
				</div>
			</div>
			<div class="col-sm-2"></div>
		</div>
	</div>

	<script>
		// Disable form submissions if there are invalid fields
		(function() {
		  'use strict';
		  window.addEventListener('load', function() {
		    // Get the forms we want to add validation styles to
		    var forms = document.getElementsByClassName('needs-validation');
		    // Loop over them and prevent submission
		    var validation = Array.prototype.filter.call(forms, function(form) {
		      form.addEventListener('submit', function(event) {
		        if (form.checkValidity() === false) {
		          event.preventDefault();
		          event.stopPropagation();
		        }
		        form.classList.add('was-validated');
		      }, false);
		    });
		  }, false);
		})();
	</script>
{% endblock content %}